name: Firmware Builder

on:
    push:
        branches: [main]
    workflow_dispatch: # Allows manual trigger

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v6
            - name: Set up Python
              uses: actions/setup-python@v6
              with:
                  python-version: "3.9"
            - name: Install PlatformIO
              run: pip install -U platformio
            - name: Compile Project
              run: pio run
            - name: Upload Artifacts
              uses: actions/upload-artifact@v6
              with:
                  name: compiled-firmware
                  path: .pio/build/*/firmware.bin
